<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/index.css">
    <script src="/index.js" type="module" defer></script>
    <script type="module" defer>
      import { fetchScript, die } from '/index.js';
      const params = new URLSearchParams(window.location.search);
      const gh = params.get('gh');
      const url = params.get('url');
      if (gh) {
        const re = /^([A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?)\/([A-Za-z0-9._\/-]+)$/;
        const m = re.exec(gh);
        if (!m) {
          die(`Invalid gh parameter; ${gh}`);
        } 
        fetchScript(`https://${m[1]}.github.io/${m[2]}`);
      } else if (url) {
        fetchScript(url);
      } else {
        die(`Neither gh nor url parameters specified!`);
      }
    </script>
  </head>
  <body>
    <!-- TODO: Work on third-party -->
    <div id="container">
      <span id="script-src"></span>
      <textarea id="script-pane" rows="15">Loading...</textarea>
      <input type="file" id="file-chooser" disabled />
      <textarea id="output-pane" rows="10" disabled>Loading...</textarea>
    </div>
  </body>
</html>
