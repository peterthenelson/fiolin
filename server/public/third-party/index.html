<!DOCTYPE html>
<html>
  <head>
    <title>ƒɪᴏʟɪɴ: 3rd party script</title>
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" href="/bundle/host.css">
    <script src="/bundle/host.js" type="module" defer></script>
    <script type="module" defer>
      import { initFiolin, die } from '/bundle/host.js';
      const params = new URLSearchParams(window.location.search);
      const gh = params.get('gh');
      const url = params.get('url');
      if (gh) {
        const re = /^([A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?)\/([A-Za-z0-9._\/-]+)$/;
        const m = re.exec(gh);
        if (!m) {
          die(`Invalid gh parameter; ${gh}`);
        } 
        initFiolin(`https://${m[1]}.github.io/${m[2]}`, true);
      } else if (url) {
        initFiolin(url, true);
      } else {
        die(`Neither gh nor url parameters specified!`);
      }
    </script>
  </head>
  <body>
    <!-- TODO: Third-party-specific components -->
    <div id="container">
      <div id="script-header">
        <div id="script-title"></div>
        <div id="script-mode-button" title="Edit Script">✎</div>
      </div>
      <div id="script">
        <pre id="script-desc">Loading...</pre>
        <div id="script-editor" class="hidden"></div>
      </div>
      <div id="controls">
        <input type="file" id="file-chooser" disabled />
        <!-- TODO -->
      </div>
      <div id="output">
        <pre id="output-term">Loading...</pre>
      </div>
    </div>
  </body>
</html>
